(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{368:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"经纪人端微聊小程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#经纪人端微聊小程序"}},[t._v("#")]),t._v(" 经纪人端微聊小程序")]),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"基本信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本信息"}},[t._v("#")]),t._v(" 基本信息")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("简介")]),t._v(" "),a("p",[t._v("针对内部经纪人使用的微聊小程序，主要内嵌在【企业微信】中使用(也支持迁移至【微信】)，目前已上线城市：深圳、广州、香港、集团（除上海）所有城市。")])]),t._v(" "),a("p",[a("br"),a("br")]),t._v(" "),a("h2",{attrs:{id:"对应线上应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对应线上应用"}},[t._v("#")]),t._v(" 对应线上应用")]),t._v(" "),a("p",[a("strong",[t._v("小程序码(所有城市通用)：")]),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"qrcode.png",href:"/assets/qrcode.jpg"}},[a("img",{attrs:{src:"/assets/qrcode.jpg",alt:"qrcode.png"}})]),t._v(" "),a("br"),a("br")]),t._v(" "),a("h2",{attrs:{id:"git地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git地址"}},[t._v("#")]),t._v(" GIT地址")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://gitlab.centaline.com.cn/centnet-group/centanet/tools/chat-wepy2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://gitlab.centaline.com.cn/centnet-group/centanet/tools/chat-wepy2.0"),a("OutboundLink")],1),t._v(" "),a("strong",[t._v("开发分支：")]),t._v(" dev分支"),a("br"),t._v(" "),a("strong",[t._v("线上分支：")]),t._v(" master分支\n"),a("br"),a("br")]),t._v(" "),a("h2",{attrs:{id:"管理后台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#管理后台"}},[t._v("#")]),t._v(" 管理后台")]),t._v(" "),a("p",[a("strong",[t._v("小程序运营后台：")]),t._v(" "),a("a",{attrs:{href:"https://mp.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mp.weixin.qq.com/"),a("OutboundLink")],1),t._v(" "),a("strong",[t._v("运营对应账号：")]),t._v(" centachats@163.com（密码询PM）\n"),a("br"),a("br")]),t._v(" "),a("h2",{attrs:{id:"对接人员"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对接人员"}},[t._v("#")]),t._v(" 对接人员")]),t._v(" "),a("p",[a("strong",[t._v("前端：")]),t._v(" 黄宽"),a("br"),t._v(" "),a("strong",[t._v("Talk API：")]),t._v(" 李松松"),a("br"),t._v(" "),a("br"),a("br")]),t._v(" "),a("h2",{attrs:{id:"配置相关信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置相关信息"}},[t._v("#")]),t._v(" 配置相关信息")]),t._v(" "),a("p",[a("strong",[t._v("api地址：")]),t._v(" "),a("a",{attrs:{href:"https://talk.centanet.com/im/%5D(https://talk.centanet.com/im/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://talk.centanet.com/im/](https://talk.centanet.com/im/"),a("OutboundLink")],1),a("br"),t._v(" "),a("strong",[t._v("获取快捷回复配置：")]),t._v(" "),a("a",{attrs:{href:"https://static.centanet.com/wap/config/quickreply.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://static.centanet.com/wap/config/quickreply.json"),a("OutboundLink")],1),a("br"),t._v(" "),a("strong",[t._v("获取登录配置：")]),t._v(" "),a("a",{attrs:{href:"https://static.centanet.com/wap/config/cityconfig.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://static.centanet.com/wap/config/cityconfig.json"),a("OutboundLink")],1),a("br"),t._v(" "),a("strong",[t._v("小程序appid：")]),t._v(" wxced3539c370df72e"),a("br"),t._v(" "),a("strong",[t._v("云信appKey：")]),t._v(" d70fe05fbd6d8abf318c3eaf6d046ead\n"),a("br"),a("br")]),t._v(" "),a("h3",{attrs:{id:"项目框架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目框架"}},[t._v("#")]),t._v(" 项目框架")]),t._v(" "),a("p",[a("strong",[t._v("小程序框架：")]),t._v(" wepy\n"),a("strong",[t._v("脚手架版本：")]),t._v(" @wepy/cli 2.0.0-alpha.28"),a("br"),t._v(" "),a("strong",[t._v("云信SDK：")]),t._v(" v7.9.0"),a("br"),t._v(" "),a("strong",[t._v("UI框架：")]),t._v(" vant weapp 1.6.1")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("由于wepy框架的特殊性，UI框架vant weapp已单独提取至项目下weapp/compnents/vant文件夹，无须通过npm安装引入。")])]),t._v(" "),a("p",[a("br"),a("br")]),t._v(" "),a("h3",{attrs:{id:"项目结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目结构"}},[t._v("#")]),t._v(" 项目结构")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("具体目录结构,以及对应目录-功能模块参考：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("centanet-tools-chat-2.0\n├─ .editorconfig \n├─ .gitignore\n├─ .prettierrc\n├─ .wepycache \n├─ .wepyignore \n├─ package-lock.json\n├─ package.json\n├─ project.config.json\n├─ src\n│  ├─ app.wpy\n│  ├─ common    --公共文件夹\n│  │  ├─ config.js    --全局配置\n│  │  ├─ eventHub.js  --事件订阅\n│  │  ├─ iconfont.less  --图标样式文件\n│  │  ├─ nim.v7.9.0.js  --云信SDK\n│  │  ├─ public.js    --公共js文件 \n│  │  └─ style.less  --公共样式文件\n│  ├─ components --组件\n│  │  └─ vant --vant UI框架文件夹\n│  │     ├─ button\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ cell\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ cell-group\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ common\n│  │     │  ├─ color.js\n│  │     │  ├─ component.js\n│  │     │  ├─ index.wxss\n│  │     │  ├─ style\n│  │     │  │  ├─ clearfix.wxss\n│  │     │  │  ├─ ellipsis.wxss\n│  │     │  │  ├─ hairline.wxss\n│  │     │  │  ├─ mixins\n│  │     │  │  │  ├─ clearfix.wxss\n│  │     │  │  │  ├─ ellipsis.wxss\n│  │     │  │  │  └─ hairline.wxss\n│  │     │  │  ├─ theme.wxss\n│  │     │  │  └─ var.wxss\n│  │     │  ├─ utils.js\n│  │     │  └─ version.js\n│  │     ├─ dialog\n│  │     │  ├─ dialog.js\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ goods-action\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ goods-action-button\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ icon\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ info\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ loading\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ mixins\n│  │     │  ├─ basic.js\n│  │     │  ├─ button.js\n│  │     │  ├─ link.js\n│  │     │  ├─ open-type.js\n│  │     │  ├─ page-scroll.js\n│  │     │  ├─ touch.js\n│  │     │  └─ transition.js\n│  │     ├─ overlay\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ popup\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     ├─ transition\n│  │     │  ├─ index.js\n│  │     │  ├─ index.json\n│  │     │  ├─ index.wxml\n│  │     │  └─ index.wxss\n│  │     └─ wxs\n│  │        ├─ add-unit.wxs\n│  │        ├─ array.wxs\n│  │        ├─ bem.wxs\n│  │        ├─ memoize.wxs\n│  │        ├─ object.wxs\n│  │        └─ utils.wxs\n│  ├─ mixins  --会话详情页和聊天记录页通用方法\n│  │  └─ common.js\n│  ├─ pages --核心页面\n│  │  ├─ details.wpy  --会话详情页\n│  │  ├─ fix.wpy  --异常修复功能\n│  │  ├─ history.wpy --聊天记录页\n│  │  ├─ list.wpy --会话列表页\n│  │  ├─ log.wpy  --日志记录(多次点击版本号进入此页面)\n│  │  ├─ login.wpy  --登录授权页\n│  │  ├─ my.wpy  --个人中心页面\n│  │  ├─ setting.wpy  --设置页面\n│  │  ├─ towechat.wpy  --迁移至微信功能\n│  │  └─ webview.wpy  --嵌套webview通用页面\n│  ├─ plugins\n│  │  ├─ axios.js  --http插件\n│  │  └─ im.js  --im核心功能\n│  ├─ static  --公共静态文件\n│  │  └─ img\n│  │     ├─ centanet.png\n│  │     ├─ fix.png\n│  │     ├─ groups.png\n│  │     ├─ list.png\n│  │     ├─ list_.png\n│  │     ├─ logo.png\n│  │     ├─ my.png\n│  │     ├─ my_.png\n│  │     ├─ search.png\n│  │     ├─ search_.png\n│  │     ├─ staff.png\n│  │     ├─ wechat.png\n│  │     └─ xiaomu.png\n│  └─ store  --全局数据状态管理\n│     └─ index.js\n└─ wepy.config.js  --wepy框架配置文件\n\n")])])]),a("h2",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),a("h3",{attrs:{id:"_1-异常监控与事件上报"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-异常监控与事件上报"}},[t._v("#")]),t._v(" 1.异常监控与事件上报")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("为便于报障排查问题，所有可能导致连接断开、微聊无法使用的场景下， 代码中都做了异常监控与日志上报。"),a("br"),t._v("\n日志上报使用微信官方提供的“实时日志”记录功能。"),a("br"),t._v("\n错误状态码整理如下")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("错误码")]),t._v(" "),a("th",[t._v("错误释义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("无")]),t._v(" "),a("td",[t._v("日志记录中无状态码，则为主动上报，连续多次点击【我的】=>【版本号】,将"),a("br"),t._v("跳转日志记录页，并主动提交日志")])]),t._v(" "),a("tr",[a("td",[t._v("102")]),t._v(" "),a("td",[t._v("SDK断开连接时触发，具体原因将记录并输出，一般为网络超时、token失效、"),a("br"),t._v("其他端登录被踢等")])]),t._v(" "),a("tr",[a("td",[t._v("103")]),t._v(" "),a("td",[t._v("获取列表失败时触发，一般为拉取会话列表超时，或执行拉取列表方法时，连"),a("br"),t._v("接已为断开状态")])]),t._v(" "),a("tr",[a("td",[t._v("104")]),t._v(" "),a("td",[t._v("清理未读消息时失败，多为列表字段异常，导致读取写入失败")])]),t._v(" "),a("tr",[a("td",[t._v("105")]),t._v(" "),a("td",[t._v("会话列表组装失败，云端会话列表和本地会话列表合并时，抛出此异常")])]),t._v(" "),a("tr",[a("td",[t._v("108")]),t._v(" "),a("td",[t._v("SDK回调异常，SDK触发任意错误，触发此方法，具体原因将记录并输出")])])])]),t._v(" "),a("h3",{attrs:{id:"_2-小程序后台日志查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-小程序后台日志查询"}},[t._v("#")]),t._v(" 2.小程序后台日志查询")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("路径：")]),t._v(" 【开发】=>【开发管理】=>【运维中心】=>【实时日志】"),a("br"),t._v("\n访问以上路径 即可查询每天上报的日志"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"/assets/log-1.jpg"}},[a("img",{attrs:{src:"/assets/log-1.jpg",alt:""}})]),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"/assets/log-2.jpg"}},[a("img",{attrs:{src:"/assets/log-2.jpg",alt:""}})])]),t._v(" "),a("br"),t._v(" "),a("h3",{attrs:{id:"_3-新消息提醒逻辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-新消息提醒逻辑"}},[t._v("#")]),t._v(" 3.新消息提醒逻辑")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("当产生新消息时，列表页将展示小圆点提醒经纪人未读消息，考虑性能原因，部分条件下的会话将自动设置为已读。具体规则&参考代码：")]),t._v(" "),a("ul",[a("li",[a("ol",[a("li",[t._v("没有正在进行中的会话,针对会话id写入小圆点提醒。")])])]),t._v(" "),a("li",[a("ol",{attrs:{start:"2"}},[a("li",[t._v("有正在进行中的会话,但非当前id,也写入小圆点提醒(正在对话中的会话不写入提醒)。")])])]),t._v(" "),a("li",[a("ol",{attrs:{start:"3"}},[a("li",[t._v("超过3天会话不写更新状态 默认已读,不写入小圆点提醒。")])])]),t._v(" "),a("li",[a("ol",{attrs:{start:"4"}},[a("li",[t._v("若为退群消息，无条件标记为已读，不写入小圆点提醒")])])]),t._v(" "),a("li",[a("ol",{attrs:{start:"5"}},[a("li",[t._v("用户点击进入【我的】页面时，开始检测本地消息，搜寻3天以上的会话，设置为已读。")])])])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 路径：/src/store/index.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//写入新消息提醒列表，tipList数组为专门本地存放已读/未读消息的数组")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTipList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chatId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stamp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//定义会话的最迟提醒时间（超过3天会话不写更新状态 默认已读）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" date "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("259200000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//console.log('更新新消息提醒列表', state, list, chatId);")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tipList "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("simpleCopy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//浅拷贝小圆点列表")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//只处理7天内的会话,3天后的会话默认已读 不处理")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stamp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" date "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" stamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" chatId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentSession "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentSession "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chatId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" chatId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          tipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("chatId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stamp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" stamp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'del'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          tipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("chatId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stamp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" stamp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'list'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//来自于列表 循环对比消息，若为退群消息，无条件标记为已读，不写入小圆点提醒")]),t._v("\n         list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chatId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" tipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chatId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" date "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stamp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'退出了群聊'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               tipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chatId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stamp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stamp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//条件都不满足,超过3天的会话 自动设置为已读")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delete")]),t._v(" tipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("chatId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//组装完成，开始写入已读列表")]),t._v("\n      state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tipList "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStorage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tipList'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" tipList "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//异常捕获， 组装是失败时，上报日志至微信小程序后台")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" log "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getRealtimeLogManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRealtimeLogManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeStorage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tipList'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//清空用户信息列表")]),t._v("\n         log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'———————tipList组装失败105———————'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tipList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStorageSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'userInfo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("br"),t._v(" "),a("h3",{attrs:{id:"_4-更新会话头像和群id逻辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-更新会话头像和群id逻辑"}},[t._v("#")]),t._v(" 4.更新会话头像和群ID逻辑")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("并非所有消息都会携带会话ID与头像，客户消息和系统消息必定携带，经纪人小程序端、IOS端必定携带，Android经纪人端不携带。"),a("br"),t._v("\n因此应优先从消息体中获取以上字段，若获取不到，则降级处理，从云信端批量获取群资料，合并写入本地内存中。具体规则参考代码：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 路径：/src/store/index.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//逻辑：优先从会话最后一条消息中取群头像和群ID,若没有取到(从安卓端发出的消息,不带扩展字段,无法取到),")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//则创建promise批量从云信获取群资料,再合并数组,写入会话列表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSessionList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" list")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'list'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//判断消息类型，若为对象则是单条会话，转为数组，若为多条会话的数组则不处理。")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promiseList "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//遍历所有会话，若没有【有效/无效标记】【头像】【会话ID】三个字段中的任意一个，创建promise批量从云信获取")]),t._v("\n   list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("invalid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("invalid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chatId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("head"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" promiseList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wepy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$im"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTeam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" promiseList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" e "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("promiseList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//遍历批量获取的接口，开始合并组装云端&本地会话的扩展字段，写入内存")]),t._v("\n      res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" custom "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               custom "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("serverCustom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isDel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" custom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IsClosured "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" custom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Invalid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chatName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" custom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChatId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" custom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChatName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'官网聊天会话'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'官网会话聊天'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chatId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" custom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChatId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("head "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" custom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OwnerIcon "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://static.centanet.com/wap/img/chat/groups.png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//合并组装完成后写入Vuex中，多条会话直接向下拼接，单条会话则置于列表顶部")]),t._v("\n      context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setTipList'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'list'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'list'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pushSessionList'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unshiftSessionList'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[a("br"),a("br")]),t._v(" "),a("h2",{attrs:{id:"扩展功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#扩展功能"}},[t._v("#")]),t._v(" 扩展功能")]),t._v(" "),a("h3",{attrs:{id:"_1-用户轨迹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-用户轨迹"}},[t._v("#")]),t._v(" 1.用户轨迹")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("数据来自官网，展示用户历史浏览的房源和店铺记录。"),a("br"),t._v(" "),a("strong",[t._v("跳转URL规则：")]),a("br"),t._v("\nhttps://esf.centanet.com/tools/viewhistory/?userid="),a("code",[t._v("用户编号")]),a("br"),t._v(" "),a("strong",[t._v("跳转URL示例：")]),a("br"),t._v(" "),a("a",{attrs:{href:"http://esf.centanet.com/tools/viewhistory/?userid=U121516283",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://esf.centanet.com/tools/viewhistory/?userid=U121516283"),a("OutboundLink")],1)]),t._v(" "),a("br"),t._v(" "),a("h3",{attrs:{id:"_2-发送房源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-发送房源"}},[t._v("#")]),t._v(" 2.发送房源")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("用于向客户推送房源，内嵌官网m站经纪人店铺页，chatmode=1为固定参数，"),a("br"),t._v("\n经纪人店铺页识别到此参数时，将只展示发送房源相关参数。"),a("br"),t._v(" "),a("strong",[t._v("跳转URL规则：")]),a("br"),t._v("\nhttps://wap.centanet.com/tj/jingjiren/esf-"),a("code",[t._v("经纪人工号")]),t._v("/?chatmode=1"),a("br"),t._v(" "),a("strong",[t._v("跳转URL示例：")]),a("br"),t._v(" "),a("a",{attrs:{href:"https://wap.centanet.com/tj/jingjiren/esf-tj19020017/?chatmode=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://wap.centanet.com/tj/jingjiren/esf-tj19020017/?chatmode=1"),a("OutboundLink")],1)]),t._v(" "),a("br"),t._v(" "),a("h3",{attrs:{id:"_3-邀请经纪人进群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-邀请经纪人进群"}},[t._v("#")]),t._v(" 3.邀请经纪人进群")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("用于邀请同事加入会话的功能。"),a("br"),t._v(" "),a("strong",[t._v("跳转URL规则：")]),a("br"),t._v("\nhttps://esf.centanet.com/tools/chat/invite.html?k=333&userid="),a("code",[t._v("经纪人完整工号")]),t._v("&chatid="),a("code",[t._v("会话chatid")]),a("br"),t._v(" "),a("strong",[t._v("跳转URL示例：")]),a("br"),t._v(" "),a("a",{attrs:{href:"https://esf.centanet.com/tools/chat/invite.html?userid=s_024_guanliyuan1&chatid=chat545124815",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://esf.centanet.com/tools/chat/invite.html?userid=s_024_guanliyuan1&chatid=chat545124815"),a("OutboundLink")],1)]),t._v(" "),a("br"),t._v(" "),a("h3",{attrs:{id:"_4-激活历史会话"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-激活历史会话"}},[t._v("#")]),t._v(" 4.激活历史会话")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("用于新旧版直聊过渡期间，找回旧版直聊会话的功能。也用于查询旧版会话中的聊天记录。"),a("br"),t._v(" "),a("strong",[t._v("跳转URL规则：")]),a("br"),t._v("\nhttps://esf.centanet.com/tools/chat/activate.html?userid="),a("code",[t._v("经纪人完整工号")]),a("br"),t._v(" "),a("strong",[t._v("跳转URL示例：")]),a("br"),t._v(" "),a("a",{attrs:{href:"https://esf.centanet.com/tools/chat/activate.html?userid=s_024_guanliyuan1",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://esf.centanet.com/tools/chat/activate.html?userid=s_024_guanliyuan1"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("br"),a("br")]),t._v(" "),a("h2",{attrs:{id:"发版流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发版流程"}},[t._v("#")]),t._v(" 发版流程")]),t._v(" "),a("h3",{attrs:{id:"构建生产包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建生产包"}},[t._v("#")]),t._v(" 构建生产包")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("构建打包时，建议退出微信开发者工具，防止文件占用部分文件生成失败。")])]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("在程序目录执行cmd命令"),a("code",[t._v("npm run build")]),t._v(" 构建生产包,输出示例,出现"),a("code",[t._v("build finished")]),t._v("相关提示,且无错误输出 则构建成功"),a("br"),t._v("\n构建文件路径： "),a("code",[t._v("项目根目录/weapp/")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("\n\nE:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("centanet-tools-chat-2."),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v(">")]),t._v("npm run build\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" chat@0.0.2 build E:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("centanet-tools-chat-2.0\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" cross-env "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("production ./node_modules/.bin/wepy build --no-cache\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":27:23"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" info build app start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":27:27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" info app building App\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":27:27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" info component building components\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":27:27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" info component building components\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":27:27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" info component building components\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":27:27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" info component building components\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":27:27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" info vendor building vendor\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":27:27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" info assets building assets\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":27:27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" info build finished\n\nE:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("git-new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("centanet-tools-chat-2."),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v(">")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"提交审核并发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提交审核并发布"}},[t._v("#")]),t._v(" 提交审核并发布")]),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[t._v("根据上一步构建好生产包以后，生成的"),a("code",[t._v("weapp")]),t._v("文件夹即为小程序包，在开发者工具右上角提交体验版， 并在小程序后台提交审核即可")])])])}),[],!1,null,null,null);s.default=e.exports}}]);